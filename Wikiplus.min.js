/**
 * Wikiplus-3.0 v0.0.1
 * 2015-12-12
 * 
 * Author:Eridanus Sora
 * Github:https://github.com/Last-Order/Wikiplus
 *
 * Include MoeNotification
 * https://github.com/Last-Order/MoeNotification
 *
 * Copyright by Wikiplus, Eridanus Sora and other contributors
 * Licensed by Apache License 2.0
 * http://wikiplus-app.smartgslb.com/
 */
 !function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Wikiplus=void 0;var g=a("./i18n"),h=d(g),i=a("./version"),j=a("./util"),k=a("./ui");c.Wikiplus=function(){function a(){e(this,a),console.log("Wikiplus-3.0 v"+i.Version.VERSION),j.Util.loadCss(i.Version.scriptURL+"/Wikiplus.css"),this.checkInstall()}return f(a,[{key:"setMoenotice",value:function(a){this.moenotice=a}},{key:"start",value:function(){this.moenotice.create.success((0,h["default"])("Test Run"))}},{key:"checkInstall",value:function(){var a=this,b=j.Util.getLocalConfig("isInstall");"True"===b?j.Util.getLocalConfig("Version")!==i.Version.VERSION&&(this.moenotice.create.success("Wikiplus-3.0 v"+i.Version.VERSION),this.moenotice.create.success(i.Version.releaseNote),j.Util.setLocalConfig("Version",i.Version.VERSION)):!function(){var b=function(){j.Util.setLocalConfig("isInstall","True"),j.Util.setLocalConfig("Version",i.Version.VERSION),j.Util.setLocalConfig("StartUseAt",(new Date).valueOf()),j.Util.setLocalConfig("StartEditCount",mw.config.values.wgUserEditCount),a.moenotice.create.success((0,h["default"])("Wikiplus installed, enjoy it"))};k.UI.createDialog({title:(0,h["default"])("Install Wikiplus"),info:(0,h["default"])("Do you allow WikiPlus to collect insensitive data to help us develop WikiPlus and improve suggestion to this site: $1 ?").replace(/\$1/gi,mw.config.values.wgSiteName)}).then(function(a){console.log("用户选择："+(a?"接受":"拒绝")),j.Util.setLocalConfig("SendStatistics",a?"True":"False"),b()})}()}}]),a}()},{"./i18n":2,"./ui":5,"./util":6,"./version":7}],2:[function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return a}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],3:[function(a,b,c){"use strict";var d=a("./core"),e=a("./moenotice");$(function(){var a=new e.MoeNotification,b=window.Wikiplus=new d.Wikiplus;b.setMoenotice(a),console.log("Wikiplus 开始加载"),b.start()})},{"./core":1,"./moenotice":4}],4:[function(a,b,c){"use strict";function d(){var a=this;this.display=function(b,c,d){var e=d||function(){},f=b||"喵~",g=c||"success";$("#MoeNotification").append($("<div>").addClass("MoeNotification-notice").addClass("MoeNotification-notice-"+g).append("<span>"+f+"</span>").fadeIn(300)),a.bind(),a.clear(),e($("#MoeNotification").find(".MoeNotification-notice").last())},this.create={success:function(b,c){var d=c||function(){};a.display(b,"success",d)},warning:function(b,c){var d=c||function(){};a.display(b,"warning",d)},error:function(b,c){var d=c||function(){};a.display(b,"error",d)}},this.clear=function(){return $(".MoeNotification-notice").length>=10?($("#MoeNotification").children().first().fadeOut(150,function(){$(this).remove()}),void setTimeout(a.clear,300)):!1},this.empty=function(a){$(".MoeNotification-notice").each(function(b){if($.isFunction(a)){var c=this;setTimeout(function(){a($(c))},200*b)}else $(this).delay(200*b).fadeOut("fast",function(){$(this).remove()})})},this.bind=function(){$(".MoeNotification-notice").mouseover(function(){a.slideLeft($(this))})},window.slideLeft=this.slideLeft=function(a,b){a.css("position","relative"),a.animate({left:"-200%"},b||150,function(){$(this).fadeOut("fast",function(){$(this).remove()})})},this.init=function(){$("body").append('<div id="MoeNotification"></div>')},$("#MoeNotification").length>0||this.init()}Object.defineProperty(c,"__esModule",{value:!0}),c.MoeNotification=d},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){var b=a.title||(0,i["default"])("Wikiplus"),c=a.content||"",d=a.title||"600px",e=a.callback||new Function;$(".Wikiplus-InterBox").length>0&&$(".Wikiplus-InterBox").each(function(){$(this).remove()});var f=document.body.clientWidth,g=document.body.clientHeight,h=$("<div>").addClass("Wikiplus-InterBox").css({"margin-left":f/2-d/2,top:$(document).scrollTop()+.2*g,display:"none"}).append($("<div>").addClass("Wikiplus-InterBox-Header").html(b)).append($("<div>").addClass("Wikiplus-InterBox-Content").append(c)).append($("<span>").text("×").addClass("Wikiplus-InterBox-Close"));$("body").append(h),$(".Wikiplus-InterBox").width(d),$(".Wikiplus-InterBox-Close").click(function(){$(this).parent().fadeOut("fast",function(){window.onclose=window.onbeforeunload=void 0,$(this).remove()})});var j=function k(a){a.mousedown(function(b){var c=b.clientX,d=b.clientY,e=a.parent().offset().left,f=a.parent().offset().top;$(document).mousemove(function(b){a.parent().css({"margin-left":e+b.clientX-c,top:f+b.clientY-d})}),$(document).mouseup(function(){a.unbind("mousedown"),$(document).unbind("mousemove"),$(document).unbind("mouseup"),k(a)})})};j($(".Wikiplus-InterBox-Header")),$(".Wikiplus-InterBox").fadeIn(500),e()}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.UI=void 0;var h=a("./i18n"),i=d(h);c.UI=function(){function a(){e(this,a)}return g(a,null,[{key:"createDialog",value:function(b){var c=b.info||"",d=b.title||(0,i["default"])("Wikiplus"),e=b.mode||{Yes:[!0,(0,i["default"])("Yes")],No:[!1,(0,i["default"])("No")]};return new Promise(function(b,g){var h=$("<div>").text(c).attr("id","Wikiplus-InterBox-Content"),i=$("<div>").append(h).append($("<hr>"));for(var j in e){var k=$("<div>").addClass("Wikiplus-InterBox-Btn").attr("id","Wikiplus-InterBox-Btn"+j).text(e[j][1]).data("value",e[j][0]);i.append(k)}f({title:d,content:i,width:"600px",callback:function(){var c=function(c){$("#Wikiplus-InterBox-Btn"+c).click(function(){var d=$("#Wikiplus-InterBox-Btn"+c).data("value");a.closeAllBox(),b(d)})};for(var d in e)c(d)}})})}},{key:"closeAllBox",value:function(){$(".Wikiplus-InterBox").fadeOut("fast",function(){$(this).remove()})}}]),a}()},{"./i18n":2}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});c.Util=function(){function a(){d(this,a)}return e(a,null,[{key:"loadCss",value:function(a){$("head").append("<link>"),$("head").children(":last").attr({rel:"stylesheet",type:"text/css",href:a})}},{key:"setLocalConfig",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];a="Wikiplus-"+a,c?localStorage[a]=JSON.stringify(b):localStorage[a]=b}},{key:"getLocalConfig",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return a="Wikiplus-"+a,b?JSON.parse(localStorage[a]):localStorage[a]}}]),a}()},{}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=c.Version=function f(){d(this,f)};e.VERSION="0.0.1",e.releaseNote="正在构建Wikiplus-3.0",e.scriptURL="https://127.0.0.1"},{}]},{},[3]);